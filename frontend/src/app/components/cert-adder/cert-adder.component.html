<button class="addCertButton" (click)="open()" type="button"><i class="fa fa-plus" aria-hidden="true"></i>Ajouter un certificat</button>

<div class="add-cert-container">
  <p>STADE 1</p>
  <button (click)="nextStageURL()">URL</button>
  <button (click)="nextStageFORM()">FORM</button>
  <button (click)="nextStageTOKEN()">TOKEN</button>
  <button (click)="nextStageKEYSTORE()">KEYSTORE</button>
  <div class="validcancelbutton">
    <input (click)="close()" type="button" name="annuler" value="Annuler">
    <button type="button" (click)="previousStage()"><i class="fa fa-chevron-left" aria-hidden="true"></i>Revenir en arrière</button>
    <button type="button"><i class="fa fa-plus" aria-hidden="true"></i>Valider</button>
  </div>
  <i (click)="close()" class="fa fa-times close" aria-hidden="true"></i>
</div>

<div class="add-cert-container">
  <p>STADE 2</p>
  <div *ngIf="mode == 1">
    <p>URL :</p>
    <form (ngSubmit)="addByURL(form1)" #form1="ngForm">
      <input type="text" id="URL" name="URL" ngModel>
      <div class="validcancelbutton">
        <input (click)="close()" type="button" name="annuler" value="Annuler">
        <button type="button" (click)="previousStage()"><i class="fa fa-chevron-left" aria-hidden="true"></i>Revenir en arrière</button>
        <button type="submit"><i class="fa fa-plus" aria-hidden="true"></i>Valider</button>
      </div>
    </form>

    <i (click)="close()" class="fa fa-times close" aria-hidden="true"></i>
  </div>

  <div *ngIf="mode == 2">
    <form (ngSubmit)="createCert(form2)" #form2="ngForm">
      <div class="form-inner-container">
        <div>
          <p>Nom / sujet :</p>
          <input type="text" id="cn" name="cn" ngModel/>
          <p>Date de mise en circulation :</p>
          <input type="date" pattern="dd/MM/YYYY" id="notbefore" name="notbefore" ngModel/>
          <p>Date d'expiration :</p>
          <input type="date" pattern="dd/MM/YYYY" id="notafter" name="notafter" ngModel/>
          <p>Adresse mail</p>
          <input type="mail" id="mail" name="mail" ngModel/>
        </div>
        <div class="formDiv">
          <p>Titre</p>
          <input type="text" id="t" name="t" ngModel/>
          <p>Nom de l'organisation :</p>
          <input type="text" id="o" name="o" ngModel/>
          <p>Unité d'organisation :</p>
          <input type="text" id="ou" name="ou" ngModel/>
          <p>Localité :</p>
          <input type="text" id="l" name="l" ngModel/>
          <p>Région / état :</p>
          <input type="text" id="st" name="st" ngModel/>
          <p>Pays</p>
          <input type="text" id="c" name="c" ngModel/>
          <p>Rue</p>
          <input type="text" id="street" name="street" ngModel/>
          <p>Code postal / code ZIP :</p>
          <input type="text" id="pc" name="pc" ngModel/>
        </div>
      </div>

      <div class="validcancelbutton">
        <input (click)="close()" type="button" name="annuler" value="Annuler">
        <button type="button" (click)="previousStage()"><i class="fa fa-chevron-left" aria-hidden="true"></i>Revenir en arrière</button>
        <button type="submit"><i class="fa fa-plus" aria-hidden="true"></i>Valider</button>
      </div>
    </form>
    <i (click)="close()" class="fa fa-times close" aria-hidden="true"></i>
  </div>

  <div *ngIf="mode == 3">
    <form (ngSubmit)="addByFile()" #file="ngForm" enctype="multipart/form-data">
      <input type="file" id="file" class="file" name="file" (change)="onFileChange($event)" ngModel>
      <div class="validcancelbutton">
        <input (click)="close()" type="button" name="annuler" value="Annuler">
        <button type="button" (click)="previousStage()"><i class="fa fa-chevron-left" aria-hidden="true"></i>Revenir en arrière</button>
        <button type="submit"><i class="fa fa-plus" aria-hidden="true"></i>Valider</button>
      </div>
    </form>
    <i (click)="close()" class="fa fa-times close" aria-hidden="true"></i>
  </div>

  <div *ngIf="mode == 4">
    <div class="validcancelbutton">
      <input (click)="close()" type="button" name="annuler" value="Annuler">
      <button type="button" (click)="previousStage()"><i class="fa fa-chevron-left" aria-hidden="true"></i>Revenir en arrière</button>
      <button type="button"><i class="fa fa-plus" aria-hidden="true"></i>Valider</button>
    </div>
    <i (click)="close()" class="fa fa-times close" aria-hidden="true"></i>
  </div>

</div>

<div class="add-cert-container">
  <p>STADE 3</p>
  <form (ngSubmit)="validate(form)" #form="ngForm">
    <table class="adder-list">
      <thead>
        <tr class="adder-list-top">
          <th class="checkboxTD"></th>
          <th>Objet</th>
          <th>Date d'expiration</th>
        </tr>
      </thead>
      <tbody>
        <tr class="adder-list-content" *ngFor="let certificat of certificats; let i = index">
          <td class="checkboxTD"><input type="checkbox" name="check{{i}}" ngModel="true"></td>
          <td>{{getInformations(certificat).cn}}</td>
          <td>
            <p>{{getDate(certificat.notAfter)}}</p>
            <p>{{getRemTime(certificat)}}</p>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="validcancelbutton">
      <input (click)="close()" type="button" name="annuler" value="Annuler">
      <button type="button" (click)="previousStage()"><i class="fa fa-chevron-left" aria-hidden="true"></i>Revenir en arrière</button>
      <button type="submit"><i class="fa fa-plus" aria-hidden="true"></i>Valider</button>
    </div>
    <i (click)="close()" class="fa fa-times close" aria-hidden="true"></i>
  </form>
</div>

<div (click)="closeSelf()" class="add-cert-shadow">

</div>
